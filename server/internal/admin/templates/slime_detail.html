{{define "slime_detail.html"}}
{{template "layout.html" .}}
{{end}}

{{define "content"}}
{{if eq .Message "edited"}}
<div class="msg-success">슬라임 정보가 수정되었습니다.</div>
{{else if eq .Message "created"}}
<div class="msg-success">슬라임이 생성되었습니다.</div>
{{else if eq .Message "error"}}
<div class="msg-error">오류가 발생했습니다.</div>
{{end}}

<!-- Slime Info -->
<div class="stats-grid" style="grid-template-columns: repeat(4, 1fr);">
  <div class="stat-card">
    <div class="label">종</div>
    <div class="value" style="font-size: 18px; color: #e8e4f0;">{{.Slime.SpeciesName}}</div>
    <div style="font-size: 11px; color: #636e72; margin-top: 4px;">Species ID: {{.Slime.SpeciesID}}</div>
  </div>
  <div class="stat-card">
    <div class="label">원소</div>
    <div class="value" style="font-size: 18px;">{{.Slime.Element}}</div>
  </div>
  <div class="stat-card">
    <div class="label">등급</div>
    <div class="value" style="font-size: 18px;"><span class="badge badge-{{.Slime.Grade}}">{{.Slime.Grade}}</span></div>
  </div>
  <div class="stat-card">
    <div class="label">소유자</div>
    <div class="value" style="font-size: 16px;"><a href="/admin/users/{{.Slime.OwnerID}}">{{.Slime.OwnerNick}}</a></div>
  </div>
  <div class="stat-card">
    <div class="label">레벨</div>
    <div class="value">{{.Slime.Level}}</div>
  </div>
  <div class="stat-card">
    <div class="label">경험치</div>
    <div class="value" style="color: #74b9ff;">{{.Slime.Exp}}</div>
  </div>
  <div class="stat-card">
    <div class="label">성격</div>
    <div class="value" style="font-size: 16px;">{{.Slime.Personality}}</div>
  </div>
  <div class="stat-card">
    <div class="label">상태</div>
    <div class="value" style="font-size: 16px;">
      {{if .Slime.IsSick}}<span style="color:#ff6b6b;">아픔</span>{{else}}<span style="color:#55efc4;">정상</span>{{end}}
    </div>
  </div>
  <div class="stat-card">
    <div class="label">호감도</div>
    <div class="value" style="color: #ff6b6b;">{{.Slime.Affection}}</div>
  </div>
  <div class="stat-card">
    <div class="label">배고픔</div>
    <div class="value" style="color: #ffeaa7;">{{.Slime.Hunger}}</div>
  </div>
  <div class="stat-card">
    <div class="label">컨디션</div>
    <div class="value" style="color: #55efc4;">{{.Slime.Condition}}</div>
  </div>
  <div class="stat-card">
    <div class="label">생성일</div>
    <div class="value" style="font-size: 14px;">{{.Slime.CreatedAt.Format "2006-01-02 15:04"}}</div>
  </div>
</div>

<!-- Edit Form -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
  <div class="stat-card">
    <div class="label" style="margin-bottom: 12px; font-size: 14px; color: #55efc4;">슬라임 수정</div>
    <form method="POST" action="/admin/slimes/{{.Slime.ID}}/edit">
      <div class="form-row">
        <label>레벨</label>
        <input type="number" name="level" value="{{.Slime.Level}}" min="1" max="100" style="width: 100px;" />
      </div>
      <div class="form-row">
        <label>경험치</label>
        <input type="number" name="exp" value="{{.Slime.Exp}}" min="0" style="width: 100px;" />
      </div>
      <div class="form-row">
        <label>호감도</label>
        <input type="number" name="affection" value="{{.Slime.Affection}}" min="0" max="100" style="width: 100px;" />
      </div>
      <div class="form-row">
        <label>배고픔</label>
        <input type="number" name="hunger" value="{{.Slime.Hunger}}" min="0" max="100" style="width: 100px;" />
      </div>
      <div class="form-row">
        <label>컨디션</label>
        <input type="number" name="condition" value="{{.Slime.Condition}}" min="0" max="100" style="width: 100px;" />
      </div>
      <div class="form-row">
        <label>아픔</label>
        <select name="is_sick" style="width: 100px;">
          <option value="false" {{if not .Slime.IsSick}}selected{{end}}>아니오</option>
          <option value="true" {{if .Slime.IsSick}}selected{{end}}>예</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">수정</button>
    </form>
  </div>

  <div class="stat-card">
    <div class="label" style="margin-bottom: 12px; font-size: 14px; color: #ff6b6b;">위험 영역</div>
    <p style="font-size: 12px; color: #b2bec3; margin-bottom: 16px;">이 슬라임을 삭제하면 되돌릴 수 없습니다.</p>
    <form method="POST" action="/admin/slimes/{{.Slime.ID}}/delete">
      <button type="submit" class="btn btn-danger" onclick="return confirm('정말 이 슬라임을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')">슬라임 삭제</button>
    </form>
  </div>
</div>

<div style="margin-top: 8px;">
  <a href="/admin/slimes" class="btn btn-sm" style="background: rgba(255,255,255,0.06); color: #b2bec3;">&larr; 슬라임 목록으로</a>
  <a href="/admin/users/{{.Slime.OwnerID}}" class="btn btn-sm" style="background: rgba(255,255,255,0.06); color: #b2bec3; margin-left: 8px;">소유자 보기</a>
</div>
{{end}}

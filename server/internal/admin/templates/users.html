{{define "users.html"}}
{{template "layout.html" .}}
{{end}}

{{define "content"}}
<form class="search-bar" method="GET" action="/admin/users">
  <input type="text" name="search" placeholder="Search by nickname..." value="{{.Search}}" />
  <button type="submit" class="btn btn-primary">Search</button>
  {{if .Search}}<a href="/admin/users" class="btn btn-danger">Clear</a>{{end}}
</form>

<p style="font-size: 12px; color: #636e72; margin-bottom: 12px;">Total: {{.TotalCount}} users</p>

<table>
  <thead>
    <tr>
      <th>Nickname</th>
      <th>Level</th>
      <th>Gold</th>
      <th>Gems</th>
      <th>Joined</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{range .Users}}
    <tr>
      <td><a href="/admin/users/{{.ID}}">{{.Nickname}}</a></td>
      <td>{{.Level}}</td>
      <td style="color: #ffeaa7;">{{.Gold}}</td>
      <td style="color: #a29bfe;">{{.Gems}}</td>
      <td style="color: #636e72; font-size: 11px;">{{.CreatedAt.Format "2006-01-02"}}</td>
      <td><a href="/admin/users/{{.ID}}" class="btn btn-primary btn-sm">Detail</a></td>
    </tr>
    {{else}}
    <tr><td colspan="6" style="text-align:center; color:#636e72; padding: 24px;">No users found</td></tr>
    {{end}}
  </tbody>
</table>

{{if gt .TotalPages 1}}
<div class="pagination">
  {{if .HasPrev}}<a href="/admin/users?page={{.PrevPage}}&search={{.Search}}" class="btn btn-sm">&laquo; Prev</a>{{end}}
  <span class="current">{{.Page}} / {{.TotalPages}}</span>
  {{if .HasNext}}<a href="/admin/users?page={{.NextPage}}&search={{.Search}}" class="btn btn-sm">Next &raquo;</a>{{end}}
</div>
{{end}}
{{end}}

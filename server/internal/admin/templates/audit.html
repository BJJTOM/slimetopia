{{define "audit.html"}}
{{template "layout.html" .}}
{{end}}

{{define "content"}}
<p style="font-size: 12px; color: #636e72; margin-bottom: 12px;">총 {{.TotalCount}}건의 감사 로그</p>

{{if .Error}}
<div class="msg-error">{{.Error}}</div>
{{end}}

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>관리자</th>
      <th>액션</th>
      <th>대상 유형</th>
      <th>대상 ID</th>
      <th>상세</th>
      <th>시간</th>
    </tr>
  </thead>
  <tbody>
    {{range .Entries}}
    <tr>
      <td style="color: #636e72;">{{.ID}}</td>
      <td style="color: #55efc4;">{{.Username}}</td>
      <td>{{.Action}}</td>
      <td>{{.TargetType}}</td>
      <td style="color: #636e72; font-size: 11px;">{{.TargetID}}</td>
      <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{.Detail}}</td>
      <td style="color: #636e72; font-size: 11px;">{{.CreatedAt.Format "2006-01-02 15:04:05"}}</td>
    </tr>
    {{else}}
    <tr><td colspan="7" style="text-align:center; color:#636e72; padding: 24px;">감사 로그가 없습니다</td></tr>
    {{end}}
  </tbody>
</table>

{{if gt .TotalPages 1}}
<div class="pagination">
  {{if .HasPrev}}<a href="/admin/audit?page={{.PrevPage}}" class="btn btn-sm">&laquo; 이전</a>{{end}}
  <span class="current">{{.Page}} / {{.TotalPages}}</span>
  {{if .HasNext}}<a href="/admin/audit?page={{.NextPage}}" class="btn btn-sm">다음 &raquo;</a>{{end}}
</div>
{{end}}
{{end}}

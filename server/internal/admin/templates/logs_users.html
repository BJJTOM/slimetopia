{{define "logs_users.html"}}
{{template "layout.html" .}}
{{end}}

{{define "content"}}
<div class="tab-bar">
  <a href="/admin/logs/users?tab=signups" class="{{if eq .Tab "signups"}}active{{end}}">가입</a>
  <a href="/admin/logs/users?tab=bans" class="{{if eq .Tab "bans"}}active{{end}}">정지</a>
</div>

<p style="color:#636e72; font-size:12px; margin-bottom:12px;">총 {{.TotalCount}}건</p>

{{if eq .Tab "bans"}}
<table>
  <thead>
    <tr><th>시간</th><th>관리자</th><th>액션</th><th>대상</th><th>상세</th></tr>
  </thead>
  <tbody>
    {{range .Logs}}
    <tr>
      <td style="font-size:11px; color:#636e72;">{{formatDate .CreatedAt}}</td>
      <td>{{.Nickname}}</td>
      <td>
        {{if eq .Action "ban_user"}}<span class="badge badge-mythic">정지</span>
        {{else}}<span class="badge badge-uncommon">해제</span>{{end}}
      </td>
      <td>{{.Provider}}</td>
      <td style="font-size:11px; max-width:300px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{{truncate .Detail 80}}</td>
    </tr>
    {{else}}
    <tr><td colspan="5" style="text-align:center; color:#636e72;">데이터 없음</td></tr>
    {{end}}
  </tbody>
</table>
{{else}}
<table>
  <thead>
    <tr><th>시간</th><th>닉네임</th><th>이메일</th><th>로그인 방식</th></tr>
  </thead>
  <tbody>
    {{range .Logs}}
    <tr>
      <td style="font-size:11px; color:#636e72;">{{formatDate .CreatedAt}}</td>
      <td>{{.Nickname}}</td>
      <td style="font-size:12px; color:#636e72;">{{.Email}}</td>
      <td><span class="badge badge-rare">{{.Provider}}</span></td>
    </tr>
    {{else}}
    <tr><td colspan="4" style="text-align:center; color:#636e72;">데이터 없음</td></tr>
    {{end}}
  </tbody>
</table>
{{end}}

<div class="pagination">
  {{if .HasPrev}}<a href="?tab={{.Tab}}&page={{.PrevPage}}">이전</a>{{end}}
  <span class="current">{{.Page}} / {{.TotalPages}}</span>
  {{if .HasNext}}<a href="?tab={{.Tab}}&page={{.NextPage}}">다음</a>{{end}}
</div>
{{end}}

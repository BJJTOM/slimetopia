{{define "species.html"}}
{{template "layout.html" .}}
{{end}}

{{define "content"}}
{{if .Error}}
<div class="msg-error">{{.Error}}</div>
{{end}}

<!-- Stats Summary -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 8px; margin-bottom: 16px;">
  <div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #0984e3;">{{.Total}}</div>
    <div style="font-size: 11px; color: #b2bec3;">ì´ ì¢…ì¡±ìˆ˜</div>
  </div>
  {{if .GradeCounts}}
  {{with index .GradeCounts "common"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #636e72;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Common</div>
  </div>{{end}}
  {{with index .GradeCounts "uncommon"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #00b894;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Uncommon</div>
  </div>{{end}}
  {{with index .GradeCounts "rare"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #0984e3;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Rare</div>
  </div>{{end}}
  {{with index .GradeCounts "epic"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #6c5ce7;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Epic</div>
  </div>{{end}}
  {{with index .GradeCounts "legendary"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #fdcb6e;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Legendary</div>
  </div>{{end}}
  {{with index .GradeCounts "mythic"}}<div style="background: #2d3436; border-radius: 8px; padding: 12px; text-align: center;">
    <div style="font-size: 22px; font-weight: 700; color: #fd79a8;">{{.}}</div>
    <div style="font-size: 11px; color: #b2bec3;">Mythic</div>
  </div>{{end}}
  {{end}}
</div>

<!-- Faction Tabs -->
<div class="tab-bar">
  <a href="/admin/gamedata/species" {{if eq .Faction ""}}class="active"{{end}}>ì „ì²´ (203)</a>
  <a href="/admin/gamedata/species?faction=east_blue" {{if eq .Faction "east_blue"}}class="active"{{end}}>ì´ìŠ¤íŠ¸ë¸”ë£¨</a>
  <a href="/admin/gamedata/species?faction=grand_line" {{if eq .Faction "grand_line"}}class="active"{{end}}>ê·¸ëœë“œë¼ì¸</a>
  <a href="/admin/gamedata/species?faction=straw_hat" {{if eq .Faction "straw_hat"}}class="active"{{end}}>ë°€ì§šëª¨ì</a>
  <a href="/admin/gamedata/species?faction=baroque" {{if eq .Faction "baroque"}}class="active"{{end}}>ë°”ë¡œí¬</a>
  <a href="/admin/gamedata/species?faction=sky_island" {{if eq .Faction "sky_island"}}class="active"{{end}}>ìŠ¤ì¹´ì´ì•„ì¼ëœë“œ</a>
  <a href="/admin/gamedata/species?faction=cipher_pol" {{if eq .Faction "cipher_pol"}}class="active"{{end}}>ì‚¬ì´í¼í´</a>
  <a href="/admin/gamedata/species?faction=warlords" {{if eq .Faction "warlords"}}class="active"{{end}}>ì¹ ë¬´í•´</a>
  <a href="/admin/gamedata/species?faction=worst_gen" {{if eq .Faction "worst_gen"}}class="active"{{end}}>ìµœì•…ì˜ì„¸ëŒ€</a>
  <a href="/admin/gamedata/species?faction=marines" {{if eq .Faction "marines"}}class="active"{{end}}>í•´êµ°</a>
  <a href="/admin/gamedata/species?faction=yonko" {{if eq .Faction "yonko"}}class="active"{{end}}>ì‚¬í™©</a>
  <a href="/admin/gamedata/species?faction=logia" {{if eq .Faction "logia"}}class="active"{{end}}>ìì—°ê³„</a>
  <a href="/admin/gamedata/species?faction=paramecia" {{if eq .Faction "paramecia"}}class="active"{{end}}>ì´ˆì¸ê³„</a>
  <a href="/admin/gamedata/species?faction=zoan" {{if eq .Faction "zoan"}}class="active"{{end}}>ë™ë¬¼ê³„</a>
  <a href="/admin/gamedata/species?faction=revolutionary" {{if eq .Faction "revolutionary"}}class="active"{{end}}>í˜ëª…êµ°</a>
  <a href="/admin/gamedata/species?faction=celestial" {{if eq .Faction "celestial"}}class="active"{{end}}>ì²œë£¡ì¸</a>
  <a href="/admin/gamedata/species?faction=hidden" {{if eq .Faction "hidden"}}class="active"{{end}}>íˆë“ </a>
</div>

<!-- Filters -->
<form class="filter-bar" method="GET" action="/admin/gamedata/species">
  {{if .Faction}}<input type="hidden" name="faction" value="{{.Faction}}" />{{end}}
  <select name="element" style="width: 130px;">
    <option value="">ì „ì²´ ì›ì†Œ</option>
    <option value="water" {{if eq .Element "water"}}selected{{end}}>ğŸ’§ water</option>
    <option value="fire" {{if eq .Element "fire"}}selected{{end}}>ğŸ”¥ fire</option>
    <option value="grass" {{if eq .Element "grass"}}selected{{end}}>ğŸŒ¿ grass</option>
    <option value="light" {{if eq .Element "light"}}selected{{end}}>âœ¨ light</option>
    <option value="dark" {{if eq .Element "dark"}}selected{{end}}>ğŸŒ‘ dark</option>
    <option value="ice" {{if eq .Element "ice"}}selected{{end}}>â„ï¸ ice</option>
    <option value="electric" {{if eq .Element "electric"}}selected{{end}}>âš¡ electric</option>
    <option value="poison" {{if eq .Element "poison"}}selected{{end}}>â˜ ï¸ poison</option>
    <option value="earth" {{if eq .Element "earth"}}selected{{end}}>ğŸª¨ earth</option>
    <option value="wind" {{if eq .Element "wind"}}selected{{end}}>ğŸŒªï¸ wind</option>
    <option value="celestial" {{if eq .Element "celestial"}}selected{{end}}>ğŸŒŸ celestial</option>
  </select>
  <select name="grade" style="width: 130px;">
    <option value="">ì „ì²´ ë“±ê¸‰</option>
    <option value="common" {{if eq .Grade "common"}}selected{{end}}>common</option>
    <option value="uncommon" {{if eq .Grade "uncommon"}}selected{{end}}>uncommon</option>
    <option value="rare" {{if eq .Grade "rare"}}selected{{end}}>rare</option>
    <option value="epic" {{if eq .Grade "epic"}}selected{{end}}>epic</option>
    <option value="legendary" {{if eq .Grade "legendary"}}selected{{end}}>legendary</option>
    <option value="mythic" {{if eq .Grade "mythic"}}selected{{end}}>mythic</option>
  </select>
  <button type="submit" class="btn btn-primary">í•„í„°</button>
  <a href="/admin/gamedata/species" class="btn btn-danger btn-sm">ì´ˆê¸°í™”</a>
</form>

<p style="font-size: 12px; color: #636e72; margin-bottom: 12px;">
  ê²€ìƒ‰ ê²°ê³¼: {{.Total}}ì¢…
</p>

<table>
  <thead>
    <tr>
      <th style="width: 50px;">ID</th>
      <th>ì´ë¦„</th>
      <th>ì˜ë¬¸ëª…</th>
      <th style="width: 80px;">ì†ì„±</th>
      <th style="width: 90px;">ë“±ê¸‰</th>
      <th style="width: 110px;">ì§„ì˜</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    {{range .Species}}
    <tr>
      <td style="color: #636e72; font-size: 12px;">{{.ID}}</td>
      <td style="font-weight: 600;">{{.Name}}</td>
      <td style="color: #b2bec3; font-size: 12px;">{{.NameEN}}</td>
      <td>
        <span style="font-size: 12px;">
        {{if eq .Element "water"}}ğŸ’§{{else if eq .Element "fire"}}ğŸ”¥{{else if eq .Element "grass"}}ğŸŒ¿{{else if eq .Element "light"}}âœ¨{{else if eq .Element "dark"}}ğŸŒ‘{{else if eq .Element "ice"}}â„ï¸{{else if eq .Element "electric"}}âš¡{{else if eq .Element "poison"}}â˜ ï¸{{else if eq .Element "earth"}}ğŸª¨{{else if eq .Element "wind"}}ğŸŒªï¸{{else if eq .Element "celestial"}}ğŸŒŸ{{end}}
        {{.Element}}</span>
      </td>
      <td><span class="badge badge-{{.Grade}}">{{.Grade}}</span></td>
      <td>
        {{if .Faction}}
        <span style="font-size: 11px; padding: 2px 6px; border-radius: 4px; background: #2d3436; color: #dfe6e9;">{{.Faction}}</span>
        {{end}}
      </td>
      <td style="color: #b2bec3; font-size: 11px; max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{.Description}}</td>
    </tr>
    {{else}}
    <tr><td colspan="7" style="text-align:center; color:#636e72; padding: 24px;">ì¢…ì¡± ë°ì´í„° ì—†ìŒ</td></tr>
    {{end}}
  </tbody>
</table>
{{end}}
